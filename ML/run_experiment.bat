@echo off
REM üöÄ –°–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞ –≤ –Ω–æ–≤–æ–º –æ–∫–Ω–µ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞
REM –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ: run_experiment.bat [PRESET_NAME]

setlocal

REM –û–ø—Ä–µ–¥–µ–ª—è–µ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Å–∫—Ä–∏–ø—Ç–∞
cd /d "%~dp0"

REM –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
if not exist "venv\Scripts\python.exe" (
    echo ‚ùå –û–®–ò–ë–ö–ê: –í–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ!
    echo    –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç—å: venv\Scripts\python.exe
    pause
    exit /b 1
)

REM –ò—Å–ø–æ–ª—å–∑—É–µ–º Python –∏–∑ venv –Ω–∞–ø—Ä—è–º—É—é (–±–æ–ª–µ–µ –Ω–∞–¥—ë–∂–Ω–æ)
set PYTHON_EXE=venv\Scripts\python.exe

REM –ü—Ä–µ—Å–µ—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
set PRESET=MORE_TRAIN
if not "%~1"=="" set PRESET=%~1

echo ======================================================================
echo üß™ –ó–ê–ü–£–°–ö –≠–ö–°–ü–ï–†–ò–ú–ï–ù–¢–ê
echo ======================================================================
echo üìå –ü—Ä–µ—Å–µ—Ç: %PRESET%
echo üìÖ –í—Ä–µ–º—è: %date% %time%
echo üìç –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è: %CD%
echo üêç Python: %PYTHON_EXE%
echo ======================================================================
echo.

REM –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ Python —Ä–∞–±–æ—Ç–∞–µ—Ç
%PYTHON_EXE% --version >nul 2>&1
if errorlevel 1 (
    echo ‚ùå –û–®–ò–ë–ö–ê: Python –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è!
    pause
    exit /b 1
)

REM –ó–∞–ø—É—Å–∫–∞–µ–º —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç
%PYTHON_EXE% run_experiment.py --preset %PRESET% --skip-features

echo.
echo ======================================================================
echo ‚úÖ –≠–ö–°–ü–ï–†–ò–ú–ï–ù–¢ –ó–ê–í–ï–†–®–Å–ù
echo ======================================================================
echo.
echo üí° –î–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∑–∞–ø—É—Å—Ç–∏—Ç–µ:
echo    python compare_models.py
echo.

pause

